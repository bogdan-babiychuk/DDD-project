{"ast":null,"code":"var _jsxFileName = \"D:\\\\Dev\\\\kafka_2\\\\frontend\\\\src\\\\components\\\\ChatView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { chatApi } from '../api/client';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatView = ({\n  chat\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (chat) {\n      loadMessages();\n    }\n  }, [chat]);\n  const loadMessages = async () => {\n    if (!chat) return;\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await chatApi.getChatMessages(chat.chat_id);\n      setMessages(response.messages);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Ошибка при загрузке сообщений');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleMessageSent = newMessage => {\n    setMessages(prev => [...prev, newMessage]);\n  };\n  if (!chat) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex items-center justify-center bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg\",\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0447\\u0430\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: \"\\u0438\\u043B\\u0438 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0434\\u043B\\u044F \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 flex flex-col bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border-b border-gray-200 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-semibold text-gray-900\",\n            children: chat.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: [\"ID: \", chat.chat_id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadMessages,\n          disabled: isLoading,\n          className: \"text-primary-600 hover:text-primary-700 text-sm font-medium disabled:opacity-50\",\n          children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-hidden\",\n      children: error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-red-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: loadMessages,\n            className: \"mt-2 text-primary-600 hover:text-primary-700 underline\",\n            children: \"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043D\\u043E\\u0432\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(MessageList, {\n        messages: messages,\n        isLoading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n      chatId: chat.chat_id,\n      onMessageSent: handleMessageSent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatView, \"AGutmT0o/EcvFXruQJvjTodTCDg=\");\n_c = ChatView;\nexport default ChatView;\nvar _c;\n$RefreshReg$(_c, \"ChatView\");","map":{"version":3,"names":["React","useState","useEffect","chatApi","MessageList","MessageInput","jsxDEV","_jsxDEV","ChatView","chat","_s","messages","setMessages","isLoading","setIsLoading","error","setError","loadMessages","response","getChatMessages","chat_id","err","Error","message","handleMessageSent","newMessage","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","onClick","disabled","chatId","onMessageSent","_c","$RefreshReg$"],"sources":["D:/Dev/kafka_2/frontend/src/components/ChatView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ChatResponse, CreatedMessageResponse } from '../types/api';\r\nimport { chatApi } from '../api/client';\r\nimport MessageList from './MessageList';\r\nimport MessageInput from './MessageInput';\r\n\r\ninterface ChatViewProps {\r\n  chat: ChatResponse | null;\r\n}\r\n\r\nconst ChatView: React.FC<ChatViewProps> = ({ chat }) => {\r\n  const [messages, setMessages] = useState<CreatedMessageResponse[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (chat) {\r\n      loadMessages();\r\n    }\r\n  }, [chat]);\r\n\r\n  const loadMessages = async () => {\r\n    if (!chat) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await chatApi.getChatMessages(chat.chat_id);\r\n      setMessages(response.messages);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Ошибка при загрузке сообщений');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMessageSent = (newMessage: CreatedMessageResponse) => {\r\n    setMessages(prev => [...prev, newMessage]);\r\n  };\r\n\r\n  if (!chat) {\r\n    return (\r\n      <div className=\"flex-1 flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center text-gray-500\">\r\n          <p className=\"text-lg\">Выберите чат</p>\r\n          <p className=\"text-sm\">или создайте новый для начала общения</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-1 flex flex-col bg-gray-50\">\r\n      {/* Заголовок чата */}\r\n      <div className=\"bg-white border-b border-gray-200 p-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-xl font-semibold text-gray-900\">{chat.title}</h1>\r\n            <p className=\"text-sm text-gray-500\">\r\n              ID: {chat.chat_id}\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={loadMessages}\r\n            disabled={isLoading}\r\n            className=\"text-primary-600 hover:text-primary-700 text-sm font-medium disabled:opacity-50\"\r\n          >\r\n            Обновить\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Сообщения */}\r\n      <div className=\"flex-1 overflow-hidden\">\r\n        {error ? (\r\n          <div className=\"flex-1 flex items-center justify-center\">\r\n            <div className=\"text-center text-red-600\">\r\n              <p>{error}</p>\r\n              <button\r\n                onClick={loadMessages}\r\n                className=\"mt-2 text-primary-600 hover:text-primary-700 underline\"\r\n              >\r\n                Попробовать снова\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <MessageList messages={messages} isLoading={isLoading} />\r\n        )}\r\n      </div>\r\n\r\n      {/* Поле ввода сообщения */}\r\n      <MessageInput chatId={chat.chat_id} onMessageSent={handleMessageSent} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}